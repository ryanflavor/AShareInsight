### **项目简报：企业业务概念智能检索系统 (MVP)**

**文档版本**: 1.2
**创建日期**: 2025年7月17日

#### **1. 执行摘要**

本项目旨在构建一个基于LangChain的、轻量级、高效的智能检索系统。系统通过先进的LLM信息提取技术，深度解析上市公司年报及研报，为每个公司构建由多个“业务概念”组成的结构化画像。其核心价值在于，能够超越传统的关键词或行业分类，在“业务实质”的层面上发现公司间的深层关联，并结合实时行情数据进行动态筛选，为投资研究和战略分析提供一个快速、精准、可解释的决策支持工具。

#### **2. 问题陈述**

当前，在投资和市场分析中发现真正具有可比性的公司面临巨大挑战。传统方法存在以下痛点：
* **关键词搜索**：结果嘈杂，无法理解业务的真实内涵。
* **行业分类**：粒度过粗，无法区分同一行业下业务模式迥异的公司。
* **复杂系统（如图数据库）**：如您之前的系统，引入了过高的技术复杂度和维护成本，且处理延迟长（10-15秒），核心算法（如PPR）效果不佳，投入产出不成正比。
* **信息不完整**：手动或半自动整理的数据摘要（如旧的corpus.json）丢失了大量关键的量化和定性信息。

这些问题导致分析效率低下，可能错失投资机会，或对竞争格局产生误判。

#### **3. 提议的解决方案**

我们将采用“绿地开发流”，构建一个全新的、架构简洁的纯向量检索系统。
* **核心引擎**: 基于LangChain框架，充分利用其在文档处理、模型调用、向量存储和检索链编排方面的能力。
* **数据基石**: 设计一个强大的数据提取管道，使用我们最终版的V5提示词，从财报中自动提取包含**公司元数据**和一系列**业务概念**的高质量JSON数据。这是整个系统的“护城河”。
* **检索逻辑**: 为MVP阶段实现一个统一的、综合性的排序逻辑。它将主要基于**业务概念的向量相似度**，并结合**源概念的重要性评分**进行加权，以确保检索结果的相关性。
* **动态筛选**: 在核心排序逻辑之上，增加一层实时的**股票行情数据过滤器**，以满足您在不同市场环境下的动态筛选需求。

#### **4. 目标用户**

* **主要用户**: 关注主题投资、行业研究和寻找对标公司的股票投资者、基金经理、证券分析师。
* **次要用户**: 企业战略部门、投资并购（M&A）团队，用于进行竞争格局分析和寻找潜在标的。

#### **5. 目标与成功指标**

为确保项目成功，我们设定以下可量化的目标：
* **查询响应速度**: 单次API调用后，端到端响应时间应小于5秒。
* **概念识别准确率**: LLM提取业务概念的准确率应大于90%。
* **相关公司匹配精度**: 在我们的测试集中，返回结果的Top10准确率应大于80%。
* **系统可维护性**: 采用模块化设计，未来增加新的数据源或分析模型时，核心代码无需重构。

#### **6. MVP范围**

**核心功能 (MVP必须包含):**
* 自动化的数据提取与存储管道（Epic 1的全部内容）。
* 基于`company_code`和`market_filters`的核心API接口。
* 实现MVP阶段统一的、基于“向量相似度+源概念重要性”的排序逻辑。
* 支持处理年报和研报两种文档类型。

**范围之外 (MVP之后考虑):**
* 引入更复杂的、可切换的分析模式（如“价值发现” vs. “概念挖掘”）。
* 图形用户界面（GUI）。
* 生成详细的、对比式的公司分析报告。
* 基于提取的`relations`数据构建知识图谱并进行可视化。

#### **7. 技术考量**
* **核心框架**: LangChain
* **数据库**: PostgreSQL (配合 pgvector 插件)
* **Embedding与Rerank模型**: 本地部署的Qwen3系列模型。
* **LLM**: gemini 2.5 pro
* **硬件**: 针对您的2x4090 GPU配置进行批处理和模型加载优化。

#### **8. 风险与开放性问题**
* **主要风险**:
    1.  **LLM提取稳定性**: 不同版本的LLM可能对同一提示词有不同理解，需要建立版本控制和持续的质量监控。
    2.  **数据源格式变化**: 公司财报的格式可能每年都有微小变化，提取脚本需要具备一定的鲁棒性。
    3.  **性能瓶颈**: 随着公司和文档数量增加，数据融合与向量索引步骤可能成为性能瓶颈，需预留优化空间。
* **开放性问题**:
    1.  在MVP的排序逻辑中，各部分的权重系数（如向量相似度、源概念重要性）如何通过测试来确定最佳值？